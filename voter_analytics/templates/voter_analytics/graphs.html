<!-- templates/voter_analytics/graphs.html -->
{% extends 'voter_analytics/base.html' %}
{% block content %}
<h1>Voter Analytics Graphs</h1>

<!-- Code from voter_list -->
<div class="container">
    <form method="get">
        <label for="party_affiliation">Party Affiliation:</label>
        <select name="party_affiliation" id="party_affiliation">
            <option value="">All</option>
            {% for party in party_affiliations %}
            <option value="{{ party }}">{{ party }}</option>
            {% endfor %}
        </select>
        
        <label for="min_dob">Minimum Date of Birth:</label>
        <select name="min_dob" id="min_dob">
            <option value="">Any</option>
            {% for year in years_range %}
                <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
        </select>

        <label for="max_dob">Maximum Date of Birth:</label>
        <select name="max_dob" id="max_dob">
            <option value="">Any</option>
            {% for year in years_range %}
                <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
        </select>

        <label for="voter_score">Voter Score:</label>
        <select name="voter_score" id="voter_score">
            <option value="">Any</option>
            {% for score in score_range %}
                <option value="{{ score }}">{{ score }}</option>
            {% endfor %}
        </select>
        </br>
        <label for="voted_elections">Voted in Elections:</label>
        <div>
            <input type="checkbox" name="voted_elections" value="v20state"> 2020 State<br>
            <input type="checkbox" name="voted_elections" value="v21town"> 2021 Town<br>
            <input type="checkbox" name="voted_elections" value="v21primary"> 2021 Primary<br>
            <input type="checkbox" name="voted_elections" value="v22general"> 2022 General<br>
            <input type="checkbox" name="voted_elections" value="v23town"> 2023 Town<br>
        </div>

        <button type="submit">Filter</button>
    </form>

    <!-- Display Graphs -->
    <div class="graphs">
        <h2>Voter Distribution by Year of Birth</h2>
        {{ hist_div|safe }}

        <h2>Voter Distribution by Party Affiliation</h2>
        {{ pie_div|safe }}

        <h2>Vote Count by Election</h2>
        {{ bar_div|safe }}
    </div>
</div>

{% endblock %}
